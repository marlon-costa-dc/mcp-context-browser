_template: "cargo_dependency_check"
id: "CA001"
name: "Domain Layer Independence"
category: "architecture"
severity: "error"
enabled: true
engine: "rusty-rules"

description: "Domain crate must have zero internal mcb-* dependencies"
rationale: "Domain layer contains pure business logic independent of frameworks"

config:
  crate_name: "mcb-domain"
  forbidden_prefixes: ["mcb-"]
  allowed_dependencies: ["std", "serde", "thiserror", "uuid", "chrono"]

rule: |
  rule DomainIndependence "Domain Layer Independence" {
      when
          Crate(name == "mcb-domain") &&
          Dependencies(contains any "mcb-*")
      then
          Violation("Domain layer cannot depend on internal mcb-* crates");
  }